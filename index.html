<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Registro de Não Conformidade — Tubo Esgoto 300 mm</title>

  <!-- Tailwind CDN (Build-in) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Icons (Heroicons) -->
  <script src="https://unpkg.com/feather-icons"></script>

  <!-- jsPDF + html2canvas for PDF export -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

  <link rel="stylesheet" href="style.css" />
</head>
<body class="bg-slate-50 text-slate-800 min-h-screen flex items-start justify-center py-8">
  <main class="w-[960px] max-w-full mx-4">
    <header class="mb-6">
      <div class="flex items-center justify-between">
        <h1 class="text-2xl font-semibold">Registro de Não Conformidade</h1>
        <div class="text-sm text-slate-500">Modelo: TUBO ESGOTO SÉRIE LEVE 300 MM</div>
      </div>
      <p class="mt-1 text-sm text-slate-500">Formulário interativo — salva localmente e permite exportar em PDF.</p>
    </header>

    <section id="form-card" class="bg-white shadow-md rounded-2xl p-6">
      <form id="ncForm" class="space-y-6">

        <!-- 1. Identificação -->
        <fieldset class="border border-slate-100 rounded-xl p-4">
          <legend class="text-lg font-medium px-2">1. Identificação da Não Conformidade</legend>

          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
            <div>
              <label class="block text-sm font-medium">Produto/Serviço</label>
              <input name="produto" type="text" class="input" placeholder="Ex: TUBO ESGOTO SÉRIE LEVE 300 MM" />
            </div>

            <div>
              <label class="block text-sm font-medium">Quantidade</label>
              <input name="quantidade" type="number" min="0" class="input" placeholder="35" />
            </div>

            <div>
              <label class="block text-sm font-medium">Data do Registro</label>
              <input name="data_registro" type="date" class="input" />
            </div>
          </div>

          <div class="mt-4">
            <label class="block text-sm font-medium">Descrição da Não Conformidade</label>
            <textarea name="descricao" rows="3" class="input" placeholder="Descreva a não conformidade..."></textarea>
          </div>
        </fieldset>

        <!-- 2. Responsável -->
        <fieldset class="border border-slate-100 rounded-xl p-4">
          <legend class="text-lg font-medium px-2">2. Responsável pela Emissão</legend>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
            <div>
              <label class="block text-sm font-medium">Nome</label>
              <input name="responsavel_emissao" type="text" class="input" placeholder="CLEVERSON" />
            </div>
            <div>
              <label class="block text-sm font-medium">Nome (2º)</label>
              <input name="responsavel_emissao2" type="text" class="input" placeholder="OWSIANY" />
            </div>
            <div>
              <label class="block text-sm font-medium">Data</label>
              <input name="data_emissao" type="date" class="input" />
            </div>
          </div>
        </fieldset>

        <!-- 3. Disposição -->
        <fieldset class="border border-slate-100 rounded-xl p-4">
          <legend class="text-lg font-medium px-2">3. Disposição a ser feita</legend>

          <div class="mt-3 flex gap-4 flex-wrap">
            <label class="radio">
              <input type="radio" name="disposicao" value="retrabalhar" />
              <span>Retrabalhar</span>
            </label>
            <label class="radio">
              <input type="radio" name="disposicao" value="rejeitar" />
              <span>Rejeitar</span>
            </label>
            <label class="radio">
              <input type="radio" name="disposicao" value="reparar" />
              <span>Reparar</span>
            </label>
            <label class="radio">
              <input type="radio" name="disposicao" value="aprovar_mediante" />
              <span>Aprovar mediante concessão</span>
            </label>
            <label class="radio">
              <input type="radio" name="disposicao" value="outros" />
              <span>Outros</span>
            </label>
          </div>

          <div class="mt-4">
            <label class="block text-sm font-medium">Observações sobre a disposição</label>
            <textarea name="observacao_disposicao" rows="2" class="input" placeholder="Ex: BARRAS DE TUBO EM DESCONFORMIDADE, NECESSÁRIO DEVOLUÇÃO."></textarea>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
            <div>
              <label class="block text-sm font-medium">Responsável</label>
              <input name="responsavel_disposicao" type="text" class="input" />
            </div>
            <div>
              <label class="block text-sm font-medium">Responsável (2º)</label>
              <input name="responsavel_disposicao2" type="text" class="input" />
            </div>
            <div>
              <label class="block text-sm font-medium">Data</label>
              <input name="data_disposicao" type="date" class="input" />
            </div>
          </div>
        </fieldset>

        <!-- Reinspeção -->
        <fieldset class="border border-slate-100 rounded-xl p-4">
          <legend class="text-lg font-medium px-2">Registro da Reinspeção</legend>

          <div class="mt-3 flex gap-4 items-center">
            <label class="radio">
              <input type="radio" name="reinspecao" value="aprovado" />
              <span>Aprovado</span>
            </label>
            <label class="radio">
              <input type="radio" name="reinspecao" value="nao_aprovado" />
              <span>Não Aprovado</span>
            </label>
          </div>

          <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium">Responsável pela Reinspeção</label>
              <input name="responsavel_reinspecao" type="text" class="input" />
            </div>
            <div>
              <label class="block text-sm font-medium">Data</label>
              <input name="data_reinspecao" type="date" class="input" />
            </div>
          </div>

          <div class="mt-3">
            <label class="block text-sm font-medium">Observações</label>
            <textarea name="obs_reinspecao" rows="2" class="input"></textarea>
          </div>
        </fieldset>

        <!-- Ação corretiva -->
        <fieldset class="border border-slate-100 rounded-xl p-4">
          <legend class="text-lg font-medium px-2">4. É necessário a abertura de ação corretiva?</legend>
          <div class="mt-3 flex gap-6">
            <label class="radio">
              <input type="radio" name="acao_corretiva" value="sim" />
              <span>Sim</span>
            </label>
            <label class="radio">
              <input type="radio" name="acao_corretiva" value="nao" />
              <span>Não</span>
            </label>
          </div>

          <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium">Anexos (NF, Recebimento, etc.)</label>
              <input id="anexo" name="anexo" type="file" class="block text-sm" />
              <p id="anexo-note" class="text-xs text-amber-600 mt-1">Atenção: anexos não são persistidos no armazenamento local.</p>
            </div>

            <div>
              <label class="block text-sm font-medium">Anexos — descrições</label>
              <input name="anexos_desc" type="text" class="input" placeholder="Ex: NF: 182.518; Recebimento: 25/03/25" />
            </div>
          </div>
        </fieldset>

        <!-- Ações / Controles -->
        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
          <div class="flex gap-2 flex-wrap">
            <button id="saveBtn" type="button" class="btn-primary">Salvar (Local)</button>
            <button id="clearBtn" type="button" class="btn-ghost">Limpar Dados</button>
            <button id="exportPdfBtn" type="button" class="btn-accent">Gerar PDF</button>
            <button id="exportJsonBtn" type="button" class="btn-outline">Exportar JSON</button>
            <input id="importJsonFile" type="file" accept=".json" class="hidden" />
            <button id="importJsonBtn" type="button" class="btn-outline">Importar JSON</button>
          </div>

          <div class="text-sm text-slate-500">
            <label class="inline-flex items-center gap-2">
              <input id="autosaveToggle" type="checkbox" checked />
              <span>Auto-save (LocalStorage)</span>
            </label>
          </div>
        </div>

      </form>
    </section>

    <footer class="mt-6 text-xs text-slate-500">
      <div class="container">
      <small>© <span id="ano"></span> Shiva Conexões — Relatórios digitais.</small>
    </div>
    </footer>
  </main>

  <script src="script.js"></script>
  <script>feather.replace();</script>
</body>
</html>
